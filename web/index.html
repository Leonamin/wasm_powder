<!DOCTYPE html>
<html lang="ko">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Wasm íŒŒìš°ë” í† ì´</title>
    <style>
      * { margin: 0; padding: 0; box-sizing: border-box; }
      body {
        font-family: "Segoe UI", Apple SD Gothic Neo, sans-serif;
        background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
        min-height: 100vh;
        padding: 20px;
        display: flex;
        justify-content: center;
        align-items: flex-start;
      }
      .container {
        background: white;
        border-radius: 20px;
        box-shadow: 0 20px 60px rgba(0,0,0,0.3);
        padding: 30px;
        width: 100%;
        max-width: 800px;
        display: flex;
        flex-direction: column;
        align-items: center;
      }
      h1 { color: #333; margin-bottom: 20px; font-size: 1.8em; }
      
      /* ìº”ë²„ìŠ¤ */
      .canvas-wrapper {
        border: 4px solid #333;
        border-radius: 10px;
        background: #000;
        margin-bottom: 25px;
        overflow: hidden;
        width: 100%;
        max-width: 800px; 
        aspect-ratio: 4/3; /* 400:300 ë¹„ìœ¨ ìœ ì§€ */
        display: flex; 
        justify-content: center;
        align-items: center;
        box-shadow: 0 10px 30px rgba(0,0,0,0.2);
      }
      canvas {
        width: 100%; height: 100%;
        image-rendering: pixelated;
        cursor: crosshair;
        display: block;
      }

      /* íƒ­ ë©”ë‰´ */
      .tabs {
        display: flex;
        background: #f1f3f5;
        padding: 5px;
        border-radius: 30px;
        margin-bottom: 20px;
        width: 100%;
      }
      .tab-btn {
        flex: 1;
        padding: 12px;
        border: none;
        border-radius: 25px;
        background: transparent;
        color: #868e96;
        font-weight: bold;
        font-size: 1em;
        cursor: pointer;
        transition: 0.2s;
      }
      .tab-btn.active {
        background: white;
        color: #333;
        box-shadow: 0 2px 8px rgba(0,0,0,0.1);
      }

      /* ë‚´ìš© ì˜ì—­ */
      .tab-content {
        display: none;
        width: 100%;
        grid-template-columns: repeat(auto-fill, minmax(100px, 1fr));
        gap: 15px;
      }
      .tab-content.active { display: grid; }

      /* ì…ì ë²„íŠ¼ */
      .particle-btn {
        display: flex;
        flex-direction: column;
        align-items: center;
        justify-content: center;
        height: 100px;
        border: none;
        border-radius: 15px;
        cursor: pointer;
        transition: 0.2s;
        font-weight: bold;
        color: #333;
        box-shadow: 0 4px 6px rgba(0,0,0,0.05);
        font-size: 0.9em;
      }
      .particle-btn:hover {
        transform: translateY(-5px);
        box-shadow: 0 8px 15px rgba(0,0,0,0.1);
      }
      .particle-btn.active {
        border: 3px solid #667eea;
        transform: scale(0.95);
        box-shadow: inset 0 2px 5px rgba(0,0,0,0.1);
      }
      .icon { font-size: 2.5em; margin-bottom: 10px; }
      
      /* ë¡œë”© */
      #loading {
        position: fixed; top: 0; left: 0; right: 0; bottom: 0;
        background: rgba(255,255,255,0.9);
        display: flex; justify-content: center; align-items: center;
        font-size: 2em; z-index: 9999;
      }

      /* í•˜ë‹¨ ì»¨íŠ¸ë¡¤ */
      .bottom-controls {
        margin-top: 30px;
        display: flex;
        gap: 15px;
        width: 100%;
        justify-content: center;
        flex-wrap: wrap;
      }
      .util-btn {
        padding: 10px 20px;
        border-radius: 10px;
        border: 1px solid #ddd;
        background: white;
        cursor: pointer;
        font-weight: bold;
        display: flex; align-items: center; gap: 5px;
      }
      .util-btn.clear {
        background: #ff6b6b; color: white; border: none;
      }
      .util-btn:hover { background: #f8f9fa; }
      .util-btn.clear:hover { background: #fa5252; }
      .fps { font-family: monospace; color: #888; align-self: center; }
    </style>
  </head>
  <body>
    <div id="loading">â³ ë¡œë”© ì¤‘...</div>

    <div class="container">
      <h1>ğŸŒŠ Wasm íŒŒìš°ë” í† ì´</h1>
      
      <div class="canvas-wrapper">
        <canvas id="particleCanvas"></canvas>
      </div>

      <!-- íƒ­ -->
      <div class="tabs">
        <button class="tab-btn active" onclick="setTab('solid', event)">ê³ ì²´</button>
        <button class="tab-btn" onclick="setTab('liquid', event)">ì•¡ì²´</button>
        <button class="tab-btn" onclick="setTab('gas', event)">ê¸°ì²´</button>
        <button class="tab-btn" onclick="setTab('energy', event)">ì—ë„ˆì§€</button>
      </div>

      <!-- ê³ ì²´ -->
      <div id="solid" class="tab-content active">
        <button class="particle-btn" data-type="1" style="background: #e9ecef"><span class="icon">ğŸ§±</span>ë²½</button>
        <button class="particle-btn" data-type="2" style="background: #fff9db"><span class="icon">â³</span>ëª¨ë˜</button>
        <button class="particle-btn" data-type="10" style="background: #d8bfa5"><span class="icon">ğŸªµ</span>ë‚˜ë¬´</button>
        <button class="particle-btn" data-type="11" style="background: #dee2e6"><span class="icon">ğŸ”©</span>ì² </button>
        <button class="particle-btn" data-type="12" style="background: #f1f3f5"><span class="icon">âš›ï¸</span>ë¦¬íŠ¬</button>
        <button class="particle-btn" data-type="13" style="background: #e3fafc"><span class="icon">ğŸ§‚</span>ë‚˜íŠ¸ë¥¨</button>
        <button class="particle-btn" data-type="4" style="background: #e3fafc"><span class="icon">ğŸ§Š</span>ì–¼ìŒ</button>
      </div>

      <!-- ì•¡ì²´ -->
      <div id="liquid" class="tab-content">
        <button class="particle-btn" data-type="3" style="background: #e7f5ff"><span class="icon">ğŸ’§</span>ë¬¼</button>
        <button class="particle-btn" data-type="14" style="background: #fff3bf"><span class="icon">ğŸ›¢ï¸</span>ê¸°ë¦„</button>
      </div>

      <!-- ê¸°ì²´ -->
      <div id="gas" class="tab-content">
        <button class="particle-btn" data-type="5" style="background: #f8f9fa"><span class="icon">ğŸ’¨</span>ì¦ê¸°</button>
        <button class="particle-btn" data-type="7" style="background: #e7f5ff"><span class="icon">ğŸŒ¬ï¸</span>ì‚°ì†Œ</button>
        <button class="particle-btn" data-type="8" style="background: #ffc9c9"><span class="icon">ğŸˆ</span>ìˆ˜ì†Œ</button>
        <button class="particle-btn" data-type="9" style="background: #e9ecef"><span class="icon">ğŸŒ«ï¸</span>ìœ ì¦ê¸°</button>
        <button class="particle-btn" data-type="15" style="background: #ced4da"><span class="icon">â˜ï¸</span>COâ‚‚</button>
      </div>

      <!-- ì—ë„ˆì§€ -->
      <div id="energy" class="tab-content">
        <button class="particle-btn" data-type="6" style="background: #ffe3e3"><span class="icon">ğŸ”¥</span>ë¶ˆ</button>
        <button class="particle-btn brush-mode-btn" data-brush-mode="heat" style="background: #ffc9c9"><span class="icon">ğŸŒ¡ï¸</span>ê°€ì—´</button>
        <button class="particle-btn brush-mode-btn" data-brush-mode="cool" style="background: #c3fae8"><span class="icon">â„ï¸</span>ëƒ‰ê°</button>
      </div>

      <div class="bottom-controls">
        <button class="util-btn" id="modeToggle">ğŸ¨ ë·° ëª¨ë“œ ë³€ê²½</button>
        <button class="util-btn clear" onclick="clearGrid()">ğŸ§¹ ì´ˆê¸°í™”</button>
        <span class="fps">FPS: <span id="fpsDisplay">0</span></span>
      </div>
    </div>

    <script src="main.js"></script>
    <script>
      function setTab(id, event) {
        document.querySelectorAll('.tab-content').forEach(el => el.classList.remove('active'));
        document.querySelectorAll('.tab-btn').forEach(el => el.classList.remove('active'));
        document.getElementById(id).classList.add('active');
        event.currentTarget.classList.add('active');
      }
    </script>
  </body>
</html>
